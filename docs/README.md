# 简介

## 什么是D2R？

D2R是Design To Release（从设计到发布）的简称，旨在提供一种高效的工作流程协同设计师、产品、研发等角色工作，显著提升产品孵化与迭代效率。

在D2R工作流程中，倡导设计师和产品直接管理产品界面，而研发聚焦于非视图逻辑的开发；前者可以通过设计工具和平台随时调整界面细节，并自主预览和发布。

<u>这份文档是一份技术文档，而非使用手册，主要介绍D2R的理念、实现原理，以及基于主流设计工具、组件化方案的最佳实践示例。</u>

## D2R系统的构成


![framework-1](~@assets/intro/framework.png)

D2R系统底层是**设计语言**、**工作流程**、**技术标准**：
* **设计语言**是设计师关注的基础概念
* **工作流程**涉及设计稿交付到发布环节，与业务有一定的关联，包含平台使用者关注的基础概念
* **技术标准**主要包含了一些协议和规范，以便在不同的设计工具与技术栈都能够实现

中层是一系列**D2C2D**（设计资产与组件双向转换）、**C2R**（组件到发布）的解决方案。

应用层是一系列工具与平台，实现设计资产的托管使用以及软件的持续集成。


## 内置特性

* **模式适配** 支持自定义样式，如“日间”与”暗黑“模式，设计后和发布前可以预览不同模式效果。

* **设备适配** 支持多种适配（pt、px、dp，etc..）方式，稿件可以智能切换。

* **版本管理** 设计资产按版本进行管理，提供编译时和运行时多版本生效的机制。

## 技术要求

在设计与代码智能转换或设计资产管理的方向，业界存在诸多的D2C、Less/Node Code解决方案。而本方案侧重支持**持续集成**、**分布上线**的应用架构，因此同他们有不同的技术要求，包括不限于以下：

* **可复用** 任何设计资产（设计稿、组件、区块、页面）都有复用的机制，例如：
    * 在设计工具中引用云端组件进行新产品设计
    * 在设计工具中载入旧的产品页面，微调界面后发布为新的产品页面

* **可维护** 任何资产都是可修改的，并可触发与匹配的系统行为，例如：
    * 在设计工具中修改云端组件的样式并上传更新，必要时触发云端所有依赖这个组件的产品自动更新
    * 在设计工具中调出某个产品页面的视图进行修改并上传更新，触发持续集成流水线进行编译和发布，无需研发介入

* **持续交付** 设计工具交付到平台的资产不仅限于设计稿，也可以是各种粒度的设计资产（组件、区块、页面等），不同粒度的设计资产更新对应不同的持续交付行为，而不仅仅是单一的稿件转换HTML/Component HTML：
    * 内容网格类型产品的设计师，按照组件粒度提交和修改的模式进行交付
    * 信息流产品的设计师，按照区块粒度进行交付
    * 企业展示型页面的设计师，按照整页粒度进行交付

## 价值

* **统一设计语言** 通过系统化的设计语言提升团队的协同效率，提升设计效能，将设计师从重复的劳动中解放出来。
* **增强一致性** 利用设计语言传达信息，解决形式与功能的问题。维护品牌的视觉一致性，避免个体主观和临时性的样式决策，使产品在对外环境中保持统一的外观和调性。
* **促进前端微服务化** 从产品设计根源上注入组件化的思维，促进交互一致，减少冗余代码和不必要的耦合；通过合理的结构划分，实现独立开发、独立部署。
